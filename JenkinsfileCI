#!groovy
@Library('jenkins-pipeline-library')
import no.spk.jenkins.pipeline.ci.config.CIPipelineConfig

ciPipeline {
    config = CIPipelineConfig.get()
            .withTriggers(cron: '@daily', fromBranches: 'develop') // Trigges også på commit ved hjelp av webhook i Bitbucket
            .useMaven(jdkVersion: 11, build: 'clean install -DskipTest') // Dropper test under bygg, da bygg er et eget steg
            .withPublish(branches: 'develop') // Snapshots lages fra develop
                                              // .withRelease() er ikke nødvendig, da panda-releasebot lager release-artefakter
            .withEmailNotifications(recipients: 'ITO-TeamSterope@spk.no')
}